---
###############################################################################
# Cephadm deployment configuration.

# Whether to enable firewalld for Ceph storage hosts.
cephadm_enable_firewalld: true

###############################################################################
# Cephadm deployment configuration.

# Ceph OSD specification.
cephadm_osd_spec: |
  ---
  service_type: osd
  service_id: osd-ssd
  placement:
    host_pattern: '*'
  data_devices:
    rotational: 0
    limit: 2
  osds_per_device: 2
  encrypted: true
  ---
  service_type: osd
  service_id: osd-hdd
  placement:
    host_pattern: '*'
  data_devices:
    rotational: 1
  db_devices:
    rotational: 0
    limit: 1
  encrypted: true

###############################################################################
# Ceph post-deployment configuration.

# List of Ceph erasure coding profiles. See stackhpc.cephadm.ec_profiles role
# for format.
#cephadm_ec_profiles:

# List of Ceph CRUSH rules. See stackhpc.cephadm.crush_rules role for format.
cephadm_crush_rules:
  - name: replicated_hdd
    bucket_root: default
    bucket_type: host
    device_class: hdd
    rule_type: replicated
    state: present
  - name: replicated_ssd
    bucket_root: default
    bucket_type: host
    device_class: ssd
    rule_type: replicated
    state: present

# List of Ceph pools. See stackhpc.cephadm.pools role for format.
cephadm_pools:
  - name: backups
    application: rbd
    pool_type: replicated
    rule_name: replicated_hdd
    state: present
  - name: images
    application: rbd
    pool_type: replicated
    rule_name: replicated_hdd
    state: present
  - name: volumes
    application: rbd
    pool_type: replicated
    rule_name: replicated_ssd
    state: present
  - name: vms
    application: rbd
    pool_type: replicated
    rule_name: replicated_ssd
    state: present

# List of Cephx keys. See stackhpc.cephadm.keys role for format.
cephadm_keys:
  - name: client.cinder
    caps:
      mon: "profile rbd"
      osd: "profile rbd pool=volumes, profile rbd pool=vms, profile rbd-read-only pool=images"
      mgr: "profile rbd pool=volumes, profile rbd pool=vms"
  - name: client.cinder-backup
    caps:
      mon: "profile rbd"
      osd: "profile rbd pool=volumes, profile rbd pool=backups"
      mgr: "profile rbd pool=volumes, profile rbd pool=backups"
  - name: client.glance
    caps:
      mon: "profile rbd"
      osd: "profile rbd pool=images"
      mgr: "profile rbd pool=images"
    state: present
