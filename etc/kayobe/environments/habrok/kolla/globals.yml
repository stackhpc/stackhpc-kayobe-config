---
glance_backend_ceph: "yes"
cinder_backend_ceph: "yes"
nova_backend_ceph: "yes"

# Open up ports in firewalld for services on the public API network.
enable_external_api_firewalld: true

# Internal TLS configuration
# Copy the self-signed CA into the kolla containers
kolla_copy_ca_into_containers: true
# Use the following trust store within the contain
openstack_cacert: "/etc/ssl/certs/{{ 'ca-certificates.crt' if kolla_base_distro in ['debian', 'ubuntu'] else 'ca-bundle.trust.crt' }}"

# Enable backend TLS
kolla_enable_tls_backend: true

rabbitmq_enable_tls: true
rabbitmq_remove_ha_all_policy: true

horizon_custom_themes: [{"name": "groningen", "label": "Groningen"}]

# OVN setting required for bare metal instances.
neutron_ovn_dhcp_agent: True

# Custom image built with NGS feature branch
neutron_server_image_full: "172.23.9.249:80/rug/ubuntu-source-neutron-server:wallaby-20230207T111703"

octavia_auto_configure: "no"
octavia_provider_drivers: "ovn:OVN provider"
octavia_provider_agents: "ovn"
enable_horizon_octavia: false

# NOTE: We are increasing the HAProxy timeouts to 5 minutes due to the neutron
# generic switch driver, which synchronously applies switch configuration for
# each ironic port during node provisioning and tear down.
# The specific API calls that require this long timeout are:
# - Creation and deletion of VLAN networks.
# - Creation or update of ports, adding binding information.
# - Update of ports, removing binding information.
# - Deletion of ports.
haproxy_client_timeout: 5m30
haproxy_server_timeout: 5m30
neutron_tls_proxy_client_timeout: 5m30
neutron_tls_proxy_server_timeout: 5m30

# Bump up Elasticsearch memory defaults
es_heap_size: 8g

# CloudKitty configuration
cloudkitty_collector_backend: "prometheus"
cloudkitty_fetcher_backend: "keystone"
cloudkitty_storage_backend: "elasticsearch"

om_enable_rabbitmq_high_availability: true

keystone_extra_volumes:
  - "/opt/kayobe/keystone/mellon:/etc/apache2/mellon"
