---
###############################################################################
# Cephadm deployment configuration.

# Ceph release name.
cephadm_ceph_release: "quincy"

# Ceph container image.
cephadm_image: "{{ stackhpc_docker_registry if stackhpc_sync_ceph_images | bool else 'quay.io' }}/ceph/ceph:{{ cephadm_image_tag }}"

# Ceph container image tag.
cephadm_image_tag: "v17.2.6"

# Ceph custom repo workaround for Ubuntu Jammy as there are no official ceph repos for jammy.
cephadm_custom_repos: "{{ ansible_facts['distribution_release'] == 'jammy' }}"

# HAProxy container image.
cephadm_haproxy_image: "{{ stackhpc_docker_registry if stackhpc_sync_ceph_images | bool else 'quay.io' }}/ceph/haproxy:{{ cephadm_haproxy_image_tag }}"

# HAProxy container image tag.
cephadm_haproxy_image_tag: "2.3"

# Keepalived container image.
cephadm_keepalived_image: "{{ stackhpc_docker_registry if stackhpc_sync_ceph_images | bool else 'quay.io' }}/ceph/keepalived:{{ cephadm_keepalived_image_tag }}"

# Keepalived container image tag.
cephadm_keepalived_image_tag: "2.1.5"

# Ceph container image registry URL.
cephadm_registry_url: "{{ stackhpc_docker_registry }}"

# Ceph container image registry username.
cephadm_registry_username: "{{ stackhpc_docker_registry_username }}"

# Ceph container image registry password.
cephadm_registry_password: "{{ stackhpc_docker_registry_password }}"

# Cephadm admin network interface.
cephadm_admin_interface: "{{ admin_oc_net_name | net_interface }}"

# Ceph public network interface.
cephadm_public_interface: "{{ storage_net_name | net_interface }}"

# Ceph public network subnet CIDR.
cephadm_public_network: "{{ storage_net_name | net_cidr }}"

# Ceph cluster network interface.
cephadm_cluster_interface: "{{ storage_mgmt_net_name | net_interface }}"

# Ceph cluster network subnet CIDR.
cephadm_cluster_network: "{{ storage_mgmt_net_name | net_cidr }}"

###############################################################################
# Kolla Ceph auto-configuration.

# List of Kolla Ansible services that require Ceph configuration files.
kolla_ceph_services:
  - name: cinder-backup
    keys:
      - client.cinder
      - client.cinder-backup
    required: "{{ kolla_ceph_cinder_backup_required | bool }}"
  - name: cinder-volume
    keys:
      - client.cinder
    required: "{{ kolla_ceph_cinder_volume_required | bool }}"
  - name: glance
    keys:
      - client.glance
    required: "{{ kolla_ceph_glance_required | bool }}"
  - name: manila
    keys:
      - client.manila
    required: "{{ kolla_ceph_manila_required | bool }}"
  - name: nova
    keys:
      - client.cinder
    required: "{{ kolla_ceph_nova_required | bool }}"

# Whether to generate Ceph configuration for Cinder volume.
kolla_ceph_cinder_volume_required: "{{ kolla_enable_cinder | bool }}"

# Whether to generate Ceph configuration for Cinder backup.
kolla_ceph_cinder_backup_required: "{{ kolla_enable_cinder_backup | default(true) | bool }}"

# Whether to generate Ceph configuration for Glance.
kolla_ceph_glance_required: "{{ kolla_enable_glance | bool }}"

# Whether to generate Ceph configuration for Manila.
kolla_ceph_manila_required: "{{ kolla_enable_manila | bool }}"

# Whether to generate Ceph configuration for Nova.
kolla_ceph_nova_required: "{{ kolla_enable_nova | bool }}"
