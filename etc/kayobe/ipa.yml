---
# Ironic Python Agent (IPA) configuration.

###############################################################################
# Ironic Python Agent (IPA) image build configuration.

# Whether to build IPA images from source.
ipa_build_images: false

# URL of IPA source repository.
#ipa_build_source_url:

# Version of IPA source repository. Default is {{ openstack_branch }}.
#ipa_build_source_version:

# URL of IPA builder source repository.
#ipa_builder_source_url:

# Version of IPA builder source repository. Default is {{ openstack_branch }}.
#ipa_builder_source_version:

# List of default Diskimage Builder (DIB) elements to use when building IPA
# images. Default is ["centos", "enable-serial-console",
# "ironic-python-agent-ramdisk"].
#ipa_build_dib_elements_default:

# List of additional Diskimage Builder (DIB) elements to use when building IPA
# images. Default is none.
#ipa_build_dib_elements_extra:

# List of Diskimage Builder (DIB) elements to use when building IPA images.
# Default is combination of ipa_build_dib_elements_default and
# ipa_build_dib_elements_extra.
ipa_build_dib_elements_extra:
  - "extra-hardware"
  - "disable-selinux"
  - "stable-interface-names"

# Dictionary of default environment variables to provide to Diskimage Builder
# (DIB) during IPA image build.
#ipa_build_dib_env_default:

# Dictionary of additional environment variables to provide to Diskimage
# Builder (DIB) during IPA image build.
ipa_build_dib_env_extra:
  YUM: dnf
  DIB_RELEASE: "8-stream"
  DIB_DHCP_TIMEOUT: 120

# Dictionary of environment variables to provide to Diskimage Builder (DIB)
# during IPA image build.
#ipa_build_dib_env:

# List of default git repositories containing Diskimage Builder (DIB) elements.
# See stackhpc.os-images role for usage. Default is one item for IPA builder.
#ipa_build_dib_git_elements_default:

# List of additional git repositories containing Diskimage Builder (DIB)
# elements. See stackhpc.os-images role for usage. Default is empty.
#ipa_build_dib_git_elements_extra:
ipa_build_dib_git_elements_extra:
  - repo: "https://github.com/stackhpc/stackhpc-image-elements"
    local: "{{ source_checkout_path }}/stackhpc-image-elements"
    version: "master"
    elements_path: "elements"

# List of git repositories containing Diskimage Builder (DIB) elements. See
# stackhpc.os-images role for usage. Default is a combination of
# ipa_build_dib_git_elements_default and ipa_build_dib_git_elements_extra.
#ipa_build_dib_git_elements:

# List of DIB packages to install. Default is none.
#ipa_build_dib_packages:
ipa_build_dib_packages:
  - jq
  - sysstat

# Upper constraints file for installing packages in the virtual environment
# used for building IPA images. Default is {{ pip_upper_constraints_file }}.
#ipa_build_upper_constraints_file:

###############################################################################
# Ironic Python Agent (IPA) images configuration.

# Common path for all of the image URLs.
ipa_images_base_url: 'https://gitlab.com/api/v4/projects/25160749/packages/generic/ironic-python-agent/ussuri-20221003T170142-5109a85'

# Suffix of upstream Ironic deployment image files. Default is based on
# {{ openstack_branch }}.
#ipa_images_upstream_url_suffix:

# Name of Ironic deployment kernel image to register in Glance.
#ipa_images_kernel_name:

# URL of Ironic deployment kernel image to download.
ipa_kernel_upstream_url: '{{ ipa_images_base_url }}/ipa.kernel?access_token={{ ipa_access_token }}'

# URL of checksum of Ironic deployment kernel image.
ipa_kernel_checksum_url: '{{ ipa_images_base_url }}/ipa.kernel.sha256?access_token={{ ipa_access_token }}'

# Algorithm of checksum of Ironic deployment kernel image.
#ipa_kernel_checksum_algorithm:

# Name of Ironic deployment ramdisk image to register in Glance.
#ipa_images_ramdisk_name:

# URL of Ironic deployment ramdisk image to download.
ipa_ramdisk_upstream_url: '{{ ipa_images_base_url }}/ipa.initramfs?access_token={{ ipa_access_token }}'

# URL of checksum of Ironic deployment ramdisk image.
ipa_ramdisk_checksum_url: '{{ ipa_images_base_url }}/ipa.initramfs.sha256?access_token={{ ipa_access_token }}'

# Algorithm of checksum of Ironic deployment ramdisk image.
#ipa_ramdisk_checksum_algorithm:

# Access token for downloading the IPA images.
ipa_access_token: '{{ secrets_scientific_openstack_ipa_token }}'

###############################################################################
# Ironic Python Agent (IPA) deployment configuration.

# Whether to enable collection of LLDP TLVs.
#ipa_collect_lldp:

# List of default inspection collectors to run.
# NOTE: extra-hardware is not currently included as it requires a ramdisk
#       with the hardware python module installed.
#ipa_collectors_default:

# List of additional inspection collectors to run.
#ipa_collectors_extra:

# List of inspection collectors to run.
#ipa_collectors:

# List of default inspection benchmarks to run.
#ipa_benchmarks_default:

# List of extra inspection benchmarks to run.
#ipa_benchmarks_extra:

# List of inspection benchmarks to run.
#ipa_benchmarks:

# List of default kernel parameters for Ironic python agent.
#ipa_kernel_options_default:

# List of additional kernel parameters for Ironic python agent.
#ipa_kernel_options_extra:

# List of kernel parameters for Ironic python agent.
#ipa_kernel_options:

###############################################################################
# Dummy variable to allow Ansible to accept this file.
workaround_ansible_issue_8743: yes
