---
docker_yum_baseurl: "{{ stackhpc_repo_docker_url }}"
docker_yum_gpgkey: "https://download.docker.com/linux/{% raw %}{{ ansible_distribution | lower }}{% endraw %}/gpg"

# Monitoring
prometheus_fluentd_exporter_port: 24224

# Create RabbitMQ monitoring account
rabbitmq_monitoring_user: "monitoring"

# Support gathering CPU load generated by each container
# NOTE: Requires KA patch
prometheus_cadvisor_enable_load_monitoring: True

# Additional command line flags passed to Prometheus
prometheus_cmdline_extras: "--storage.tsdb.retention.time=60d"

# Choose only useful container metrics and labels
prometheus_cadvisor_cmdline_extras: "--docker_only --store_container_labels=false --disable_metrics=percpu,referenced_memory,cpu_topology,resctrl,udp,advtcp,sched,hugetlb,memory_numa,tcp,process"

# An initial set of endpoints to monitor
prometheus_blackbox_exporter_endpoints:
  - "{% raw %}cloudkitty:os_endpoint:{{ public_protocol }}://{{ kolla_external_fqdn | put_address_in_context('url') }}:{{ cloudkitty_api_port}}{% endraw %}"
  - "{% raw %}cinder:os_endpoint:{{ public_protocol }}://{{ kolla_external_fqdn | put_address_in_context('url') }}:{{ cinder_api_port}}{% endraw %}"
  - "{% raw %}glance:os_endpoint:{{ public_protocol }}://{{ kolla_external_fqdn | put_address_in_context('url') }}:{{ glance_api_port}}{% endraw %}"
  - "{% raw %}heat:os_endpoint:{{ public_protocol }}://{{ kolla_external_fqdn | put_address_in_context('url') }}:{{ heat_api_port}}{% endraw %}"
  - "{% raw %}ironic:os_endpoint:{{ public_protocol }}://{{ kolla_external_fqdn | put_address_in_context('url') }}:{{ ironic_api_port}}{% endraw %}"
  - "{% raw %}keystone:os_endpoint:{{ public_protocol }}://{{ kolla_external_fqdn | put_address_in_context('url') }}:{{ keystone_public_port}}{% endraw %}"
  - "{% raw %}neutron:os_endpoint:{{ public_protocol }}://{{ kolla_external_fqdn | put_address_in_context('url') }}:{{ neutron_server_port}}{% endraw %}"
  - "{% raw %}nova:os_endpoint:{{ public_protocol }}://{{ kolla_external_fqdn | put_address_in_context('url') }}:{{ nova_api_port}}{% endraw %}"
  - "{% raw %}placement:os_endpoint:{{ public_protocol }}://{{ kolla_external_fqdn | put_address_in_context('url') }}:{{ placement_api_port}}{% endraw %}"
